(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(18),r=n.n(o),l=(n(38),n(39),n(2)),i=(n(40),n(10)),s=n(5),u=n(4),d=n.n(u),j=n(11),b="LOGIN_SUCCESS",h="LOGOUT",p=n(7),f=n.n(p),O=function(e){e?f.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete f.a.defaults.headers.common.Authorization},v=n(31);f.a.defaults.baseURL="http://localhost:8000";var m=function(){return{type:h}},g=n(1),x=Object(s.b)((function(e){return{user:e.auth.user,isAuthenticated:e.auth.isAuthenticated}}),{logout:m})((function(e){var t=e.logout,n=e.user,c=e.isAuthenticated;return Object(g.jsxs)("div",{className:"NavBar",children:[Object(g.jsxs)("div",{className:"menu",children:[Object(g.jsx)(i.c,{to:"/",children:"Home"}),Object(g.jsxs)("div",{className:"NavLinks",children:["Album",Object(g.jsxs)("div",{children:[Object(g.jsx)(i.c,{to:"/new-album",children:"\xdaj Album"}),Object(g.jsx)(i.c,{to:"/albums",children:"Albumok"})]})]})]}),Object(g.jsx)("div",{className:"login",children:c?Object(g.jsxs)("div",{className:"user",children:[Object(g.jsx)("img",{src:n.photo,alt:"",referrerPolicy:"no-referrer"}),Object(g.jsx)("span",{children:n.name}),Object(g.jsx)("div",{className:"logout",onClick:function(){return t()},children:Object(g.jsx)("svg",{viewBox:"0 0 512 512",children:Object(g.jsx)("path",{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"})})})]}):Object(g.jsx)("img",{className:"google",src:"google.png",alt:"",onClick:function(){window.location.href="https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=581910913527-bte82bsk8dpd68tdv1q3eo4af77edjsk.apps.googleusercontent.com&prompt=select_account&scope=openid%20profile%20email&redirect_uri=https%3A//vaulted-agreeable-hotel.glitch.me/callback"}})})]})})),y=(n(67),function(){return Object(g.jsx)("div",{className:"Home"})}),k=n(3);n(68);function C(){return Object(g.jsx)("div",{className:"LoadingMask",children:Object(g.jsx)("img",{src:"loading.gif",alt:""})})}var N=Object(s.b)(null,{setToken:function(e){var t=(Object(v.a)(e||"")||null).user;return{type:b,payload:{token:e,user:t}}},logout:m})((function(e){var t=e.setToken,n=e.logout,a=new URLSearchParams(Object(l.f)().search),o=Object(l.g)(),r=Object(c.useState)(!1),i=Object(k.a)(r,2),s=i[0],u=i[1],b=Object(c.useState)(null),h=Object(k.a)(b,2),p=h[0],O=h[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(){var c,r,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.get("code"),e.prev=1,u(!0),r={headers:{"Content-Type":"application/json"}},e.next=6,f.a.post("/api/user/google",{code:c},r);case 6:l=e.sent,console.log("google callback /api/google res.data:",l.data),u(!1),t(l.data.token),o("/"),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(1),console.log("google callback /api/google error:",e.t0.response.data),O(e.t0.response.data),u(!1),n();case 19:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(g.jsx)("div",{className:"Callback",children:s?Object(g.jsx)(C,{}):Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"content",children:[Object(g.jsx)("h1",{children:"Google bel\xe9p\xe9s!"}),Object(g.jsxs)("div",{className:"alerts",children:[p&&p.msg&&Object(g.jsx)("p",{children:p.msg}),p&&p.errors&&p.errors.map((function(e,t){return Object(g.jsx)("p",{children:e.msg},t)})),!p&&Object(g.jsx)("p",{children:"A bel\xe9p\xe9s sikeres!"})]})]})})})})),S=n(13),w=n(15),A=n(12);n(69);function T(e){console.log(e);if(-1===["image/jpeg","image/png","image/gif"].indexOf(e.type))return!1;return!(e.size>1e7)}n(70);function z(e){var t=e.change,n=Object(c.useRef)(null),a=Object(c.useState)(""),o=Object(k.a)(a,2),r=o[0],l=o[1],i=Object(c.useState)(null),s=Object(k.a)(i,2),u=s[0],d=s[1],j=function(){var e,t,c;(null===(e=n.current)||void 0===e?void 0:e.files)&&!n.current.files[0]?(l("Nincs kiv\xe1lasztva k\xe9p!"),(null===(t=n.current)||void 0===t?void 0:t.parentElement)&&(n.current.parentElement.style.border="2px solid red")):(l(""),(null===(c=n.current)||void 0===c?void 0:c.parentElement)&&(n.current.parentElement.style.border=""))};return Object(c.useEffect)((function(){j()}),[]),Object(g.jsxs)("div",{className:"FileInput",children:[Object(g.jsxs)("button",{type:"button",onClick:function(){n.current&&n.current.click()},children:[Object(g.jsx)("input",{name:"photo",type:"file",ref:n,onChange:function(e){var c;if(null===(c=e.target)||void 0===c?void 0:c.files[0]){l(""),d(null),j();var a,o=!0,r=Object(S.a)(e.target.files);try{for(r.s();!(a=r.n()).done;){if(!T(a.value)){o=!1;break}}}catch(O){r.e(O)}finally{r.f()}if(o){var i;(null===(i=n.current)||void 0===i?void 0:i.parentElement)&&(n.current.parentElement.style.border="");var s,u=[],b=0,h=Object(S.a)(e.target.files);try{for(h.s();!(s=h.n()).done;){var p=s.value;u.push(Object(g.jsx)("p",{className:"info",children:p.name},b++))}}catch(O){h.e(O)}finally{h.f()}d(u),t(e)}else{var f;l("Valamelyik k\xe9p m\xe9rete vagy t\xedpusa nem megfelel\u0151!"),(null===(f=n.current)||void 0===f?void 0:f.parentElement)&&(n.current.parentElement.style.border="2px solid red"),n.current&&(n.current.value=""),t(e)}}},multiple:!0,required:!0}),"\xdaj f\xe9nyk\xe9p"]}),r&&Object(g.jsx)("p",{className:"error",children:r}),u&&u]})}n(71);function E(e){var t=e.filteredAlbumTitles,n=e.formChange;return Object(g.jsx)("div",{className:"AutoSearch",children:t.map((function(e,t){return Object(g.jsx)("p",{onClick:function(t){n({target:{name:"title",value:e}})},children:e},t)}))})}var P=Object(s.b)(null,{logout:m})((function(e){var t=e.logout,n=Object(c.useRef)(null),a=Object(c.useState)({}),o=Object(k.a)(a,2),r=o[0],l=o[1],s=Object(c.useState)([]),u=Object(k.a)(s,2),b=u[0],h=u[1],p=Object(c.useState)(!1),O=Object(k.a)(p,2),v=O[0],m=O[1],x=Object(c.useState)(""),y=Object(k.a)(x,2),C=y[0],N=y[1],T=Object(c.useState)([]),P=Object(k.a)(T,2),H=P[0],L=P[1],I=Object(c.useState)([]),M=Object(k.a)(I,2),R=M[0],B=M[1],F=Object(c.useState)(!1),V=Object(k.a)(F,2),D=V[0],U=V[1],_=function(e){var t;h([]),N(""),m(null===n||void 0===n||null===(t=n.current)||void 0===t?void 0:t.checkValidity()),"photo"!==e.target.name?l(Object(A.a)(Object(A.a)({},r),{},Object(w.a)({},e.target.name,e.target.value))):l(Object(A.a)(Object(A.a)({},r),{},Object(w.a)({},e.target.name,e.target.files)))},q=function(e){var t=H.map((function(e){return e.title})).filter((function(t){return t.includes(e)}));B(t)},G=function(){var e=Object(j.a)(d.a.mark((function e(n){var c,a,o,l,i,s,u,j,b,p,O,v;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in h([]),N(""),c=new FormData,r)if("photo"!==a)c.append("".concat(a),r["".concat(a)]);else{o=Object(S.a)(r["".concat(a)]);try{for(o.s();!(l=o.n()).done;)i=l.value,c.append("".concat(a),i)}catch(n){o.e(n)}finally{o.f()}}return e.prev=4,e.next=7,f.a.post("/api/photo",c,{headers:{"Content-Type":"multipart/form-data"}});case 7:(null===(u=e.sent)||void 0===u||null===(s=u.data)||void 0===s?void 0:s.success)&&(N("Az \xfaj album \xe9s/vagy k\xe9p(ek) hozz\xe1adva!"),J()),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),(null===e.t0||void 0===e.t0||null===(j=e.t0.response)||void 0===j||null===(b=j.data)||void 0===b?void 0:b.errors)&&h(e.t0.response.data.errors),(null===e.t0||void 0===e.t0||null===(p=e.t0.response)||void 0===p||null===(O=p.data)||void 0===O||null===(v=O.msg)||void 0===v?void 0:v.includes("Authentication error"))&&t();case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(j.a)(d.a.mark((function e(){var n,c,a,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/api/album/albums");case 3:n=e.sent,L(n.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(a=c.data)||void 0===a||null===(o=a.msg)||void 0===o?void 0:o.includes("Authentication error"))&&t();case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),K=function(e){setTimeout((function(){return U(e)}),200)};return Object(c.useEffect)((function(){J()}),[]),Object(c.useEffect)((function(){q("")}),[H]),Object(g.jsxs)("div",{className:"NewAlbum",children:[Object(g.jsx)("h1",{children:"\xdaj album"}),b.length?b.map((function(e,t){return Object(g.jsx)("p",{className:"error",children:e.msg},t)})):null,Object(g.jsxs)("form",{ref:n,action:"",children:[Object(g.jsxs)("div",{className:"titleDiv",children:[Object(g.jsx)("input",{type:"text",name:"title",placeholder:"C\xedm",required:!0,value:r.title||"",onBlur:function(e){return K(!1)},onFocus:function(e){return K(!0)},onChange:function(e){_(e),q(e.target.value)}}),D&&R.length?Object(g.jsx)(E,{filteredAlbumTitles:R,formChange:_}):null]}),Object(g.jsx)(z,{change:_}),Object(g.jsx)("button",{disabled:!v,type:"button",onClick:G,children:"Send"}),C&&Object(g.jsxs)("div",{children:[Object(g.jsx)("p",{className:"info",children:C}),Object(g.jsx)(i.b,{to:"/albums",children:"albums"})]})]})]})})),H=(n(72),n(73),n(74),a.a.createContext({})),L=a.a.createContext({});function I(e){var t=e.onChange,n=Object(c.useRef)(),o=a.a.Children.toArray(e.children);return a.a.cloneElement(o[0],{contentEditable:!0,suppressContentEditableWarning:!0,ref:n,onKeyUp:function(){n.current&&t(n.current.innerText)}})}function M(e){var t=e.photo,n=e.setSelectedPhoto,c=e.titleChange,a=e.addCategory,o=e.removeCategory,r=e.categories;return Object(g.jsxs)("div",{className:"info",children:[Object(g.jsx)(I,{onChange:c,children:Object(g.jsx)("p",{className:"title",children:t.title})}),Object(g.jsx)("div",{className:"imageCategories",children:t.categories.length?t.categories.map((function(e,t){return Object(g.jsx)("img",{onClick:function(t){return o(e)},src:"".concat(e,".svg"),alt:""},t)})):null}),Object(g.jsxs)("div",{className:"select",children:[Object(g.jsx)("label",{htmlFor:"category",children:"Add category"}),Object(g.jsxs)("select",{name:"category",onChange:function(e){a(e),e.target.value=""},children:[Object(g.jsx)("option",{value:"",children:"none"},0),r.filter((function(e){return!t.categories.includes(e.title)})).map((function(e,t){return Object(g.jsx)("option",{value:e.title,children:e.title},t+1)}))]})]}),Object(g.jsx)("p",{className:"date",children:new Date(t.date).toLocaleString()}),Object(g.jsx)("img",{className:"show",src:"eye.svg",alt:"",onClick:function(e){return n(t)}})]})}var R=function(e,t){return function(){var n=Object(j.a)(d.a.mark((function n(c,a,o){var r,l;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f.a[c](a,o);case 3:e(),n.next=10;break;case 6:n.prev=6,n.t0=n.catch(0),console.log(n.t0),(null===n.t0||void 0===n.t0||null===(r=n.t0.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.msg)&&n.t0.response.data.msg.includes("Authentication error")&&t();case 10:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e,t,c){return n.apply(this,arguments)}}()},B=Object(s.b)(null,{logout:m})((function(e){var t=e.photo,n=e.logout,a=Object(c.useContext)(H),o=a.setSelectedPhoto,r=a.albumTitle,l=Object(c.useContext)(L),i=l.getAlbums,s=l.categories,u=R(i,n),d=Object(c.useRef)(),j=function(e){clearTimeout(d.current),d.current=setTimeout((function(){u("put","/api/photo/title",{newTitle:e,path:t.path,albumTitle:r}),console.log("Title change")}),2e3)},b=function(e){e.target.value&&u("post","/api/photo/category",{albumTitle:r,path:t.path,category:e.target.value})},h=function(e){window.confirm("T\xf6rl\xf6d a kateg\xf3ri\xe1t ?")&&u("delete","/api/photo/category/".concat(r,"/").concat(t.path,"/").concat(e))};return Object(g.jsxs)("div",{className:"PhotoCard",children:[Object(g.jsxs)("div",{className:"overlay",children:[Object(g.jsx)("svg",{onClick:function(e){e.stopPropagation(),window.confirm("T\xf6rl\xf6d a k\xe9pet ?")&&u("delete","/api/photo/".concat(r,"/").concat(t.path))},viewBox:"0 0 448 512",children:Object(g.jsx)("path",{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"})}),Object(g.jsx)("div",{className:"left",children:Object(g.jsx)(M,{photo:t,titleChange:j,addCategory:b,removeCategory:h,categories:s,setSelectedPhoto:o})}),Object(g.jsx)("div",{className:"right",children:Object(g.jsx)(M,{photo:t,titleChange:j,addCategory:b,removeCategory:h,categories:s,setSelectedPhoto:o})})]}),Object(g.jsx)("img",{src:"/photos/".concat(t.path),alt:""})]})}));n(75);function F(){var e=Object(c.useContext)(H),t=e.selectedPhoto,n=e.setSelectedPhoto,a=e.filteredPhotos,o=Object(c.createRef)(),r=Object(c.createRef)(),l=Object(c.useState)("image"),i=Object(k.a)(l,2),s=i[0],u=i[1],d=Object(c.useState)(0),j=Object(k.a)(d,2),b=j[0],h=j[1],p=function(e,t){if(r.current&&o.current){var n=r.current,c=n.getBoundingClientRect(),a=n.cloneNode(!0),l=o.current;e&&u("image hide"),l.insertBefore(a,l.firstElementChild),a.style.position="fixed",a.style.zIndex=2,e?a.style.left=Math.floor(c.left)+"px":(a.style.visibility="visible",a.style.left=t?"-100%":"100%"),a.style.top=Math.floor(c.top)+"px",a.style.transition="left 2s",setTimeout((function(){a.style.left=e?t?"100%":"-100%":Math.floor(c.left)+"px"}),100),setTimeout((function(){a.remove(),e||u("image")}),2100)}};return Object(c.useEffect)((function(){if(t){var e=!0,n=a.findIndex((function(e){return e.path===t.path}));e=n>b,h(n),s.includes("hide")&&p(!1,e)}}),[t,a]),Object(g.jsxs)("div",{className:"PhotoDetails",ref:o,children:[Object(g.jsx)("button",{className:"close",onClick:function(e){return n(null)},children:"X"}),Object(g.jsx)("button",{disabled:s.includes("hide"),onClick:function(e){if(t){var c=a.findIndex((function(e){return e.path===t.path}));c>=1&&(p(!0,!1),n(a[c-1]))}},type:"button",children:"\u276e"}),Object(g.jsx)("div",{className:s,ref:r,children:Object(g.jsx)("img",{src:"/photos/".concat(null===t||void 0===t?void 0:t.path),alt:""})}),Object(g.jsx)("button",{disabled:s.includes("hide"),onClick:function(e){if(t){var c=a.findIndex((function(e){return e.path===t.path}));c<=a.length-2&&(p(!0,!0),n(a[c+1]))}},type:"button",children:"\u276f"})]})}var V=Object(s.b)(null,{logout:m})((function(e){var t=e.title,n=e.date,a=e.photos,o=e.logout,r=Object(c.useState)(null),l=Object(k.a)(r,2),i=l[0],s=l[1],u=Object(c.useState)(a),d=Object(k.a)(u,2),j=d[0],b=d[1],h=Object(c.useContext)(L),p=h.getAlbums,f=h.selectedCategory,O=R(p,o),v=Object(c.useRef)();return Object(c.useEffect)((function(){var e=a.filter((function(e){return e.categories.includes(f)||!f}));b(e)}),[f,a]),Object(g.jsx)("div",{className:"AlbumCard",children:Object(g.jsxs)(H.Provider,{value:{selectedPhoto:i,setSelectedPhoto:s,filteredPhotos:j,albumTitle:t},children:[i&&Object(g.jsx)(F,{}),Object(g.jsx)("svg",{onClick:function(e){window.confirm("T\xf6rl\xf6d az albumot ?")&&O("delete","/api/album/".concat(t))},viewBox:"0 0 448 512",children:Object(g.jsx)("path",{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"})}),Object(g.jsxs)("div",{className:"info",children:[Object(g.jsx)(I,{onChange:function(e){clearTimeout(v.current),v.current=setTimeout((function(){O("put","/api/album/title",{newTitle:e,title:t}),console.log("Title change")}),2e3)},children:Object(g.jsx)("h2",{className:"title",children:t})}),Object(g.jsx)("p",{className:"date",children:new Date(n).toLocaleDateString()})]}),Object(g.jsx)("div",{className:"content",children:j.length?j.map((function(e,t){return Object(g.jsx)(B,{photo:e},t)})):Object(g.jsx)("p",{className:"warning",children:"Nincs k\xe9p a v\xe1lasztott kateg\xf3ri\xe1ban!"})})]})})})),D=function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n,c){var a,o,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.get(n);case 3:a=t.sent,c(a.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),(null===t.t0||void 0===t.t0||null===(o=t.t0.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.msg)&&t.t0.response.data.msg.includes("Authentication error")&&e();case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}()},U=Object(s.b)(null,{logout:m})((function(e){var t=e.logout,n=Object(c.useState)([]),a=Object(k.a)(n,2),o=a[0],r=a[1],l=Object(c.useState)([]),i=Object(k.a)(l,2),s=i[0],u=i[1],d=Object(c.useState)(""),j=Object(k.a)(d,2),b=j[0],h=j[1],p=D(t),f=function(){p("/api/album/albums",r)};return Object(c.useEffect)((function(){p("/api/photo/categories",u),f()}),[]),Object(g.jsxs)("div",{className:"Albums",children:[Object(g.jsx)("h1",{children:"Albumok"}),Object(g.jsxs)("div",{className:"categories",children:["Kateg\xf3ri\xe1k:",Object(g.jsxs)("select",{onChange:function(e){return h(e.target.value)},children:[Object(g.jsx)("option",{value:"",children:"none"},0),s.map((function(e,t){return Object(g.jsx)("option",{value:e.title,children:e.title},t+1)}))]})]}),Object(g.jsx)(L.Provider,{value:{getAlbums:f,selectedCategory:b,categories:s},children:o.length?o.map((function(e,t){return Object(g.jsx)(V,{title:e.title,date:e.date,photos:e.photos},t)})):Object(g.jsx)("p",{children:"Nincsenek albumok"})})]})})),_=Object(s.b)((function(e){return{loading:e.auth.loading,isAuthenticated:e.auth.isAuthenticated}}),{loadUser:function(){return function(){var e=Object(j.a)(d.a.mark((function e(t){var n,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=localStorage.token)&&O(n),e.prev=2,e.next=5,f.a.get("/api/user/loaduser");case 5:c=e.sent,t({type:b,payload:{token:n,user:c.data}}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("auth actions load user error:",null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.data),t({type:h});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.loading,n=e.loadUser,a=e.isAuthenticated,o=Object(l.f)();return Object(c.useEffect)((function(){console.log("app.js location.pathname: ",o.pathname),"/callback"!==o.pathname&&n()}),[]),Object(g.jsxs)("div",{className:"App",style:{backgroundImage:'url("background.jpg")',backgroundSize:"contain",backgroundPositionX:"center"},children:[Object(g.jsx)(x,{}),Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.b,{path:"/callback",element:Object(g.jsx)(N,{})}),Object(g.jsx)(l.b,{path:"/new-album",element:t?Object(g.jsx)(C,{}):a?Object(g.jsx)(P,{}):Object(g.jsx)(l.a,{to:"/login"})}),Object(g.jsx)(l.b,{path:"/albums",element:t?Object(g.jsx)(C,{}):a?Object(g.jsx)(U,{}):Object(g.jsx)(l.a,{to:"/login"})}),Object(g.jsx)(l.b,{path:"/",element:t?Object(g.jsx)(C,{}):Object(g.jsx)(y,{})}),Object(g.jsx)(l.b,{path:"*",element:Object(g.jsx)(l.a,{to:"/"})})]})]})})),q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),o(e),r(e)}))},G=n(14),J=n(32),K=n(33),W={token:localStorage.getItem("token"),isAuthenticated:!1,loading:!0,user:null},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return console.log("auth reducer login success action payload:",t.payload),localStorage.setItem("token",t.payload.token),O(t.payload.token),Object(A.a)(Object(A.a)({},e),{},{token:t.payload.token,user:t.payload.user,isAuthenticated:!0,loading:!1});case h:return localStorage.removeItem("token"),O(),Object(A.a)(Object(A.a)({},e),{},{user:null,token:null,isAuthenticated:!1,loading:!1});default:return e}},Q=Object(G.combineReducers)({auth:X}),Y=[K.a],Z=Object(G.createStore)(Q,{},Object(J.composeWithDevTools)(G.applyMiddleware.apply(void 0,Y)));r.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(i.a,{children:Object(g.jsx)(s.a,{store:Z,children:Object(g.jsx)(_,{})})})}),document.getElementById("root")),q()}},[[76,1,2]]]);
//# sourceMappingURL=main.9a6de509.chunk.js.map